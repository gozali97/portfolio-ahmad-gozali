-- Script untuk Tabel Profile (Hanya ada 1 baris data nantinya)
create table public.profile (
  id bigint generated by default as identity primary key,
  full_name text,
  headline text, -- Contoh: "Transforming Ideas into Digital Reality"
  titles text[], -- Contoh: ["Full Stack Dev", "UI/UX Enthusiast"]
  about_short text,
  about_long text,
  avatar_url text,
  resume_url text,
  email text,
  github_url text,
  linkedin_url text,
  instagram_url text,
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- Enable RLS
alter table public.profile enable row level security;

-- Policies
create policy "Public profile view" 
on public.profile for select using (true);

create policy "Admin modify profile" 
on public.profile for all 
using (auth.role() = 'authenticated') 
with check (auth.role() = 'authenticated');

-- Insert Data Awal (Default) agar tidak kosong
insert into public.profile (full_name, headline, titles, about_short, email)
values (
  'Ahmad Gozali', 
  'Building Digital Experiences that Matter', 
  ARRAY['Full Stack Developer', 'React Specialist', 'Problem Solver'],
  'I build accessible, pixel-perfect, secure, and performant web applications.',
  'contact@email.com'
);
